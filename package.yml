name       : chatty
version    : '0.11'
release    : 14
source     :
    - https://github.com/chatty/chatty/archive/v0.11.tar.gz : 6ade796c9f93f91fd8afe9559371351bb19d6516c115e15227605f3c44dcde37
license    :
    - GPL-3.0-or-later
    - MIT
component  : network.irc
summary    : Twitch Chat Client
description: |
    Chatty is a Twitch Chat Client for Desktop written in Java featuring many Twitch specific features.
networking : yes
builddeps  :
    - gradle
    - unzip
rundeps    :
    - openjdk-8
setup      : |
    %apply_patches
build      : |
    export GRADLE_USER_HOME=/home/build/YPKG/root/chatty/
    gradle --no-daemon release
install    : |
    # Unzip to destination
    mkdir -p $installdir/usr/share/chatty
    unzip $workdir/build/releases/Chatty_$version.zip -d $installdir/usr/share/chatty/

    # Remove unneeded files
    rm $installdir/usr/share/chatty/{LICENSE,readme.txt}

    # Install to $PATH
    install -Dm00755 $pkgfiles/chatty.sh  $installdir/usr/bin/chatty

    # Install desktop file
    install -Dm00644 $pkgfiles/chatty.desktop $installdir/usr/share/applications/chatty.desktop

    # Install icons
    for size in 16 64 128; do
    install -Dm00644 src/chatty/gui/app_main_$size.png \
      $installdir/usr/share/icons/hicolor/${size}x${size}/apps/chatty.png
    done

